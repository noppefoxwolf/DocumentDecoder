# GitHub Copilot Instructions for DocumentDecoder

## プロジェクト概要
DocumentDecoderはSwiftで書かれたHTMLパーサーライブラリです。HTMLをパースして`HTMLNode`オブジェクトまたは`AttributedString`に変換する機能を提供します。

## コーディング規約とスタイル

### Swift スタイルガイド
- Apple公式のSwift API Design Guidelinesに従う
- キャメルケースを使用（変数、関数、プロパティ）
- パスカルケースを使用（型、プロトコル、列挙型）
- 適切なアクセス制御レベルを設定（public, internal, private）

### コード品質
- 関数は単一責任の原則に従う
- 可読性を重視し、適切なコメントを記述
- エラーハンドリングは`throws`を使用
- オプショナルは適切に使用し、強制アンラップは避ける

## アーキテクチャパターン

### 主要コンポーネント
- `DocumentDecoder`: メインのデコーダークラス
- `HTMLNode`: HTMLノードを表現するデータ構造
- `Color`: カラー情報を扱うユーティリティ

### テスト戦略
- Swift Testingフレームワークを使用
- `@Test`アノテーションでテストメソッドを定義
- `#expect()`マクロでアサーションを記述
- テストは機能ごとに分類（例：`ClassAttributeTests`）

## 依存関係とライブラリ

### 使用技術
- Swift Package Manager
- Swift Testing（テストフレームワーク）
- Foundation（標準ライブラリ）

### 新機能開発時の考慮点
- 既存のAPIとの一貫性を保つ
- 適切な単体テストを含める
- ドキュメンテーションコメントを追加
- パフォーマンスを考慮した実装

## 特記事項

### HTMLパース機能
- CSSクラス属性の処理（`hasClass()`, `classList`）
- 不可視要素の処理（`invisible`クラス）
- ネストした要素の再帰的処理

### テストパターン
- HTMLサンプルを使用した統合テスト
- エッジケースのテスト（空の要素、ネストした構造）
- 期待値と実際の値の比較

## コード生成時のガイドライン
- 新しいテストを追加する際は、既存のテストパターンに従う
- HTMLサンプルは実際のユースケースに基づいて作成
- エラーメッセージは具体的で分かりやすくする
- 型安全性を重視した実装を心がける
